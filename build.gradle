description = 'Almanac Converter'

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'jacoco'

defaultTasks 'jar'

// tag::repositories[]
repositories {
  mavenCentral()
}
// end::repositories[]

// tag::wrapper[]
task wrapper(type: Wrapper) {
  gradleVersion = '3.3'
}
// end::wrapper[]

// tag::jacocoTestReport[]
jacocoTestReport {
  reports {
    xml.enabled = true
    html.enabled = true
  }
}
check.dependsOn jacocoTestReport
// end::jacocoTestReport[]

// tag::test[]
test {
  useTestNG() {
    options {
      parallel='methods'
      threadCount=5
    }
  }
}
// end::test[]

// tag::jar[]
jar {
  baseName 'almanac-converter'
  duplicatesStrategy = 'exclude'
  manifest {
    attributes 'Implementation-Title': project.description
  }
  from sourceSets.test.output
}
// end::jar[]

// tag::javadoc[]
javadoc {
  title = project.description
}
// end::javadoc[]



// tag::dependencies[]
dependencies {
  compile 'org.apache.commons:commons-lang3:3.5',
          'org.hamcrest:hamcrest-core:1.3',
          'joda-time:joda-time:2.9.9'

  testCompile 'org.testng:testng:6.11'
}
// end::dependencies[]
